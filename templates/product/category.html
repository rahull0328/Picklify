{% extends 'base/base.html' %}
{% load static %}

{% block content %}
<!--================Category Product Area =================-->
<section class="cat_product_area section_gap">
  <div class="container">
    <div class="row">
      <!-- Sidebar Category List -->
      <div class="col-lg-3">
        <div class="left_sidebar_area">
          <aside class="left_widgets p_filter_widgets">
            <div class="l_w_title">
              <h3>Browse Categories</h3>
            </div>
            <div class="widgets_inner">
              <ul class="list">
                {% for category in categories %}
                  <li>
                    <a href="{% url 'category_products' category.id %}">
                      {{ category.category_name }}
                    </a>
                  </li>
                {% empty %}
                  <li>No categories found.</li>
                {% endfor %}
              </ul>
            </div>
          </aside>
        </div>
      </div>

      <!-- Products Grid -->
      <div class="col-lg-9">
        <div class="row">
          {% for product in products %}
            <div class="col-lg-4 col-md-6">
              <div class="single-product">
                <div class="product-img">
                  <img class="card-img" src="{{ product.image.url }}" alt="{{ product.name }}">
                  <div class="p_icon">
                    <a href="#"><i class="ti-eye"></i></a>
                    <a href="#"><i class="ti-heart"></i></a>
                    <a href="#"><i class="ti-shopping-cart"></i></a>
                  </div>
                </div>
                <div class="product-btm">
                  <a href="#" class="d-block">
                    <h4>{{ product.name }}</h4>
                  </a>
                  <div class="mt-3">
                    <span class="mr-4">${{ product.price }}</span>
                    {% if product.original_price %}
                      <del>${{ product.original_price }}</del>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          {% empty %}
            <div class="col-12">
              <p>No products available in this category.</p>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</section>
<!--================End Category Product Area =================-->
{% endblock %}
